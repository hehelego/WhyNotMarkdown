# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
# Should you change your keyboard layout some time, delete this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

# set font used by i3 widgets
font                          pango: SauceCodePro Nerd Font 10


set $mod                      Mod4
set $left                     h
set $down                     j
set $up                       k
set $right                    l
set $exec_                    exec --no-startup-id

# set $refresh_i3status       killall -SIGUSR1 i3status
set $refresh_i3status         killall -SIGUSR1 i3status-rs
set $menu_fzf_expanded        alacritty --class spinach-FZFmenu -t sys-menu:expanded       -e ~/.config/i3/menu-sys.fish       --show expanded
set $menu_fzf_mixed           alacritty --class spinach-FZFmenu -t sys-menu:mixed          -e ~/.config/i3/menu-sys.fish       --show mixed
set $menu_fzf_playerctl       alacritty --class spinach-FZFmenu -t playerctl-menu:expanded -e ~/.config/i3/menu-playerctl.fish --show expanded
set $menu_rofi                rofi -show
set $locker                   i3lock -c 333333
# set $screenshot             screengrab -r
set $screenshot               spectacle -r
set $bg_img                   /usr/share/wallpapers/Opal/contents/images/3840x2160.png
set $terminal                 /usr/bin/alacritty

# lock screen: lock screen before session being suspended
$exec_                        xss-lock --transfer-sleep-lock -- $locker
# wallpaper: set background wallpaper
$exec_                        feh --bg-fill $bg_img
# X compositor: start picom
$exec_                        picom -CGb -m 1.0
# display: set resolution,dpi,gamma,backlight; reset xrandr-gamma
$exec_                        fish -c 'display_internal; xbacklight -set 100; redshift -x'
# input method: start fcitx5
$exec_                        fish -c restart_im
# input: navigate mouse with keyboard
$exec_                        keynav 'loadconfig ~/.config/keynav/keynavrc'
# notification: start dunst notification server
$exec_                        dunst --config ~/.config/dunst/dunstrc


# Use pactl to adjust volume in PulseAudio.
bindsym XF86AudioRaiseVolume  $exec_ pactl set-sink-volume @DEFAULT_SINK@   +5%    ; $exec_ $refresh_i3status
bindsym XF86AudioLowerVolume  $exec_ pactl set-sink-volume @DEFAULT_SINK@   -5%    ; $exec_ $refresh_i3status
bindsym XF86AudioMute         $exec_ pactl set-sink-mute   @DEFAULT_SINK@   toggle ; $exec_ $refresh_i3status
bindsym XF86AudioMicMute      $exec_ pactl set-source-mute @DEFAULT_SOURCE@ toggle ; $exec_ $refresh_i3status
# mediakey:: media player (need playerctl)
bindsym XF86AudioPlay         $exec_ playerctl play-pause ; $exec_ $refresh_i3status
bindsym XF86AudioPause        $exec_ playerctl play-pause ; $exec_ $refresh_i3status
bindsym XF86AudioStop         $exec_ playerctl stop       ; $exec_ $refresh_i3status
bindsym XF86AudioNext         $exec_ playerctl next       ; $exec_ $refresh_i3status
bindsym XF86AudioPrev         $exec_ playerctl previous   ; $exec_ $refresh_i3status
# mediakey:: backlight control (need xorgs-xbacklight or acpilight)
bindsym XF86MonBrightnessUp   $exec_ xbacklight -inc 10 ; $exec_ $refresh_i3status
bindsym XF86MonBrightnessDown $exec_ xbacklight -dec 10 ; $exec_ $refresh_i3status
# mediakey:: ScreenSaver(lock screen)
bindsym XF86ScreenSaver       $exec_ $locker
# select a region and take a screenshot
bindsym Print                 $exec_ $screenshot

# start a terminal
bindsym $mod+Return           $exec_ $terminal

# start rofi (a program launcher)
bindsym $mod+d                $exec_ $menu_rofi
# my fzf-menu
bindsym $mod+b                $exec_ $menu_fzf_expanded
bindsym $mod+Shift+b          $exec_ $menu_fzf_mixed
bindsym $mod+m                $exec_ $menu_fzf_playerctl
# force fzf-menu to use fullscreen
for_window                    [instance="spinach-FZFmenu"] fullscreen enable

# restart the fcitx5 input method
bindsym $mod+Shift+i          $exec_ fish -c restart_im
# open the emoji selector
bindsym $mod+i                $exec_ ibus-ui-emojier-plasma
# close the latest notification
bindsym $mod+n                $exec_ dunstctl close
# pop one history notification
bindsym $mod+Shift+n          $exec_ dunstctl history-pop

# kill focused window
bindsym $mod+Shift+q          kill
# reload the configuration file
bindsym $mod+Shift+c          reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r          restart
# exit
bindsym $mod+Shift+e          $exec_ i3-nagbar \
                              -t warning -m 'exit i3wm session' \
                              -B 'exit' 'i3-msg exit' \
                              -B 'shutdown' 'shutdown -P now' \


# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier             $mod

# switch to the window that generates a notification
bindsym $mod+grave            [urgent="latest"] focus
# focus parent, child
bindsym $mod+a                focus parent
bindsym $mod+Shift+a          focus child
# focus another container
bindsym $mod+Left             focus left
bindsym $mod+Down             focus down
bindsym $mod+Up               focus up
bindsym $mod+Right            focus right
bindsym $mod+$left            focus left
bindsym $mod+$down            focus down
bindsym $mod+$up              focus up
bindsym $mod+$right           focus right

# move the focused container
bindsym $mod+Shift+Left       move left
bindsym $mod+Shift+Down       move down
bindsym $mod+Shift+Up         move up
bindsym $mod+Shift+Right      move right
bindsym $mod+Shift+$left      move left
bindsym $mod+Shift+$down      move down
bindsym $mod+Shift+$up        move up
bindsym $mod+Shift+$right     move right

# enter fullscreen mode for the focused container
bindsym $mod+f                fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s                layout stacking
bindsym $mod+w                layout tabbed
bindsym $mod+e                layout toggle split
# toggle tiling / floating
bindsym $mod+Shift+space      floating toggle

# toggle container split orientation
bindsym $mod+v                split toggle

# change focus between tiling / floating windows
bindsym $mod+space            focus mode_toggle

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1                      "1"
set $ws2                      "2"
set $ws3                      "3"
set $ws4                      "4"
set $ws5                      "5"
set $ws6                      "6"
set $ws7                      "7"
set $ws8                      "8"
set $ws9                      "9"
set $ws10                     "10"

# switch to workspace
bindsym $mod+1                workspace number $ws1
bindsym $mod+2                workspace number $ws2
bindsym $mod+3                workspace number $ws3
bindsym $mod+4                workspace number $ws4
bindsym $mod+5                workspace number $ws5
bindsym $mod+6                workspace number $ws6
bindsym $mod+7                workspace number $ws7
bindsym $mod+8                workspace number $ws8
bindsym $mod+9                workspace number $ws9
bindsym $mod+0                workspace number $ws10


# move focused container to workspace
bindsym $mod+Shift+1          move container to workspace number $ws1
bindsym $mod+Shift+2          move container to workspace number $ws2
bindsym $mod+Shift+3          move container to workspace number $ws3
bindsym $mod+Shift+4          move container to workspace number $ws4
bindsym $mod+Shift+5          move container to workspace number $ws5
bindsym $mod+Shift+6          move container to workspace number $ws6
bindsym $mod+Shift+7          move container to workspace number $ws7
bindsym $mod+Shift+8          move container to workspace number $ws8
bindsym $mod+Shift+9          move container to workspace number $ws9
bindsym $mod+Shift+0          move container to workspace number $ws10


# scratchpad
bindsym $mod+Shift+minus      move scratchpad
bindsym $mod+minus            scratchpad show


set $mode_default             "default"
set $mode_session             "session::[{l: lock}, {s: suspend}, {h: hibernate}]"
set $mode_resize              "resize::[{⬅️: -width}, {➡️: +width}, {⬆️: -height}, {⬇️: +height}]"
set $mode_display_output      "display-output::[{1: (internal)eDP}, {2: (external)USB-C-DP}, {3: (internal+external)all}]"

bindsym $mod+Escape           mode $mode_session
mode $mode_session {
	bindsym l                   $exec_ $locker,             mode $mode_default
	bindsym s                   $exec_ systemctl suspend,   mode $mode_default
	bindsym h                   $exec_ systemctl hibernate, mode $mode_default

  # Return to default mode
	bindsym Return              mode $mode_default
	bindsym Escape              mode $mode_default
	bindsym $mod+Escape         mode $mode_default
}

bindsym $mod+r                mode $mode_resize
mode $mode_resize {
  bindsym $left               resize shrink width  10 px or 10 ppt
  bindsym $down               resize grow   height 10 px or 10 ppt
  bindsym $up                 resize shrink height 10 px or 10 ppt
  bindsym $right              resize grow   width  10 px or 10 ppt

  bindsym Left                resize shrink width  10 px or 10 ppt
  bindsym Down                resize grow   height 10 px or 10 ppt
  bindsym Up                  resize shrink height 10 px or 10 ppt
  bindsym Right               resize grow   width  10 px or 10 ppt

  # Return to default mode
	bindsym Return              mode $mode_default
	bindsym Escape              mode $mode_default
	bindsym $mod+r              mode $mode_default
}

bindsym $mod+p                mode $mode_display_output
mode $mode_display_output {
	bindsym 1                   $exec_ fish -c display_internal, mode $mode_default
	bindsym 2                   $exec_ fish -c display_external, mode $mode_default
	bindsym 3                   $exec_ fish -c display_all,      mode $mode_default

  # Return to default mode
	bindsym Return              mode $mode_default
	bindsym Escape              mode $mode_default
	bindsym $mod+p              mode $mode_default
}



# status bar (i3status-rs)
bar {
	status_command              i3status-rs
	font                        pango: SourceCodePro, FontAwesome6Free, FontAwesome6Brands 10
	position                    bottom
}

# window padding and margin
smart_gaps                    on
gaps                          inner 5
