# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4
set $bg_img /usr/share/wallpapers/Opal/contents/images/3840x2160.png
set $menu_app rofi -show drun -theme fancy -show-icons
set $menu_win rofi -show window -theme fancy -show-icons
set $locker i3lock -c 333333
# set $screenshot screengrab -r
set $screenshot spectacle -r
set $terminal /usr/bin/alacritty

font pango:SourceCodePro 10




exec --no-startup-id xss-lock --transfer-sleep-lock -- $locker # lock screen before session being suspended
exec --no-startup-id feh --bg-fill $bg_img # set background wall paper
exec --no-startup-id picom -CGb -m 1.0 # provide a "X compositor"
exec --no-startup-id fish -c display_default # set resolution,dpi,gamma
exec --no-startup-id fish -c restart_im # input method
exec --no-startup-id keynav # navigate mouse with keyboard
exec --no-startup-id dunst --config ~/.config/dunst/dunstrc # notification server
exec --no-startup-id redshift -x # reset xrandr-gamma

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status-rs
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# mediakey:: media player   (need playerctl)
bindsym XF86AudioPlay exec playerctl play-pause && $refresh_i3status
bindsym XF86AudioPause exec playerctl play-pause && $refresh_i3status
bindsym XF86AudioStop exec playerctl stop && $refresh_i3status
bindsym XF86AudioNext exec playerctl next && $refresh_i3status
bindsym XF86AudioPrev exec playerctl previous && $refresh_i3status

# mediakey:: backlight control   (need xorgs-xbacklight or acpilight)
bindsym XF86MonBrightnessUp exec xbacklight -inc 10 && $refresh_i3status
bindsym XF86MonBrightnessDown exec xbacklight -dec 10 && $refresh_i3status

# mediakey:: ScreenSaver(lock screen)
bindsym XF86ScreenSaver exec --no-startup-id $locker
bindsym $mod+l exec --no-startup-id $locker

# start a terminal
bindsym $mod+Return exec $terminal
bindsym $mod+Shift+Return exec $terminal --option background_opacity=1.0

# select a region and take a screenshot
bindsym Print exec --no-startup-id $screenshot

# start rofi (a program launcher)
bindsym $mod+d exec --no-startup-id $menu_app
bindsym $mod+shift+d exec --no-startup-id $menu_win

# restart the fcitx5 input method
bindsym $mod+shift+i exec --no-startup-id fish -c restart_im

# close the latest notification
bindsym $mod+n exec --no-startup-id dunstctl close
# close all notification
bindsym $mod+shift+n exec --no-startup-id dunstctl close-all
# pop one history notification
bindsym $mod+m exec --no-startup-id dunstctl history-pop


# open the emoji selector
bindsym $mod+i exec --no-startup-id ibus-ui-emojier-plasma

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart



# kill focused window
bindsym $mod+Shift+q kill

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# focus another container
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move the focused container
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# split in horizontal orientation
bindsym $mod+h split h
# split in vertical orientation
bindsym $mod+v split v

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
# bindsym $mod+a focus parent

# focus the child container
# bindsym $mod+d focus child

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# switch to the window that generates a notification
bindsym $mod+grave [urgent="latest"] focus

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10





# resize window (you can also use the mouse for that)
mode "resize" {
		bindsym Left   resize shrink width 10 px or 10 ppt
		bindsym Down   resize grow height 10 px or 10 ppt
		bindsym Up     resize shrink height 10 px or 10 ppt
		bindsym Right  resize grow width 10 px or 10 ppt

		# back to normal mode
		bindsym Return mode "default"
		bindsym Escape mode "default"
		bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

set $session_mode_prompt "session::([e exit], [l lock], [s|h suspend-to-RAM/DISK] )"
mode $session_mode_prompt {
		bindsym e exec --no-startup-id i3-msg exit, mode "default"
		bindsym l exec --no-startup-id $locker, mode "default"
		bindsym s exec --no-startup-id systemctl suspend, mode "default"
		bindsym h exec --no-startup-id systemctl hibernate, mode "default"

		# back to normal mode
		bindsym Return      mode "default"
		bindsym Escape      mode "default"
		bindsym $mod+Escape mode "default"
}
bindsym $mod+Escape mode $session_mode_prompt

set $display_mode_promot "display::([1 eDP], [2 USB-C_DP], [3 all])"
mode $display_mode_promot {
		bindsym 1 exec --no-startup-id fish -c display_default, mode "default"
		bindsym 2 exec --no-startup-id fish -c display_extend, mode "default"
		bindsym 3 exec --no-startup-id fish -c display_all, mode "default"

		# back to normal mode
		bindsym Return mode "default"
		bindsym Escape mode "default"
		bindsym $mod+p mode "default"
}
bindsym $mod+p mode $display_mode_promot

set $backlight_mode_promot "backlight::([0..9 brightness], [d|n temperature])"
mode $backlight_mode_promot {
		# change backlight brightness
		bindsym grave exec --no-startup-id xbacklight -set 0
		bindsym 1     exec --no-startup-id xbacklight -set 10
		bindsym 2     exec --no-startup-id xbacklight -set 20
		bindsym 3     exec --no-startup-id xbacklight -set 30
		bindsym 4     exec --no-startup-id xbacklight -set 40
		bindsym 5     exec --no-startup-id xbacklight -set 50
		bindsym 6     exec --no-startup-id xbacklight -set 60
		bindsym 7     exec --no-startup-id xbacklight -set 70
		bindsym 8     exec --no-startup-id xbacklight -set 80
		bindsym 9     exec --no-startup-id xbacklight -set 90
		bindsym 0     exec --no-startup-id xbacklight -set 100

		# tweak color temperature
		bindsym d     exec --no-startup-id redshift -PO 5500
		bindsym n     exec --no-startup-id redshift -PO 3300

		# back to normal mode
		bindsym Return mode "default"
		bindsym Escape mode "default"
		bindsym $mod+b mode "default"
}
bindsym $mod+b mode $backlight_mode_promot



# status bar (i3status-rs)
bar {
	status_command i3status-rs
	font pango: SourceCodePro, FontAwesome5Free, FontAwesome5Brands 10
}



# window padding and margin
smart_gaps on
gaps inner 5
